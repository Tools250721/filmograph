server:
  port: 8080
  servlet:
    session:
      cookie:
        same-site: lax   # 개발용: lax / 운영 시 strict 권장
  compression:
    enabled: true
    mime-types: text/html,text/xml,text/plain,text/css,application/json,application/javascript

spring:
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/filmograph?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=utf8mb4
    username: root
    password: "seorin1215*"
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 2
      idle-timeout: 60000
      connection-timeout: 30000
      max-lifetime: 1800000
      pool-name: filmograph-pool

  jpa:
    database-platform: org.hibernate.dialect.MySQL8Dialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
        jdbc:
          time_zone: Asia/Seoul
    open-in-view: false
    defer-datasource-initialization: true

  sql:
    init:
      mode: always
      encoding: UTF-8

  jackson:
    time-zone: Asia/Seoul
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false

  servlet:
    multipart:
      enabled: true
      max-file-size: 20MB
      max-request-size: 20MB

  web:
    resources:
      static-locations:
        - classpath:/static/
        - file:uploads/

  task:
    scheduling:
      pool:
        size: 2

logging:
  level:
    org.hibernate.SQL: debug
    org.hibernate.orm.jdbc.bind: trace
    org.springframework.web.client: info

app:
  jwt:
    secret: "my-super-secret-key-please-change"
    issuer: "filmograph_auth"
    access-minutes: 30
    refresh-days: 14

  #  여기에 API 키 모듈화
  api:
    kobis:
      key: "e14f073e9d59e9ef326ad27ba5974283"
    kmdb:
      key: "M369E1K0HZ9G6IQ2YS62"

filmograph:
  redirect:
    wishlist: "http://localhost:5173/wishlist"
    watching: "http://localhost:5173/watching"
  reset-password-url: "http://localhost:5173/reset-password"
  upload:
    base-dir: "uploads"  # 프로젝트 루트 기준 상대 경로

#  TMDb 설정 (팀원 코드 통합)
tmdb:
  api:
    key: "76233c09bca2383555f37d3b577afa99"
  cron:
    global: "0 0 3 * * *"   # 글로벌 트렌드 갱신 (매일 새벽 3시)
    kr: "0 5 3 * * *"       # 한국 인기 갱신 (매일 새벽 3시 5분)
    us: "0 10 3 * * *"      # 미국 인기 갱신 (매일 새벽 3시 10분)
